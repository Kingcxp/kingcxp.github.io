import{e as N,u as X,f as $,g as Z,j as ee,t as se,h as te,i as k,k as D,l as t,m as le,w as ae,n as Ee,R as J,p as ie,q as re,v as ue,x as oe,y as ne,z as Q,A as M,D as Ae,B as ce,C as me,E as he,F as ve,G as pe,H as Be,I as de,J as b,K as Ce,L as g}from"./app-B6yu4Jx0.js";const ye=["/","/posts/","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/1.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/2.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/3.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/4.5.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/4.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/5.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/6.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/7.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/CRLF_and_LF.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/ConsoleRunner.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/random.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/time_and_space.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/xmake.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/0.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/1.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/2.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/3.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/4.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/5.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/6-ex.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/6.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/7.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/8-ex-linkedlist.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/8-ex-vector.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/8.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/challenges.html","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/pointer.html","/posts/Vue3%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/css.html","/posts/Vue3%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/html.html","/posts/Vue3%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/intro.html","/posts/Vue3%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue3brief.html","/posts/Vue3%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vuescript.html","/404.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/","/posts/DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/","/posts/Vue3%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/","/category/","/category/c__-sfml/","/category/c-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/","/category/cpl-dotoj-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/","/category/vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/","/tag/","/tag/c__/","/tag/sfml/","/tag/cpl/","/tag/dotoj/","/tag/css/","/tag/html/","/tag/vue3/","/tag/javascript/","/tag/typescript/","/article/","/star/","/timeline/"],Fe="SLIMSEARCH_QUERY_HISTORY",p=b(Fe,[]),De=()=>{const{queryHistoryCount:a}=g;return{enabled:a>0,queryHistories:p,addQueryHistory:r=>{p.value=Array.from(new Set([r,...p.value.slice(0,a-1)]))},removeQueryHistory:r=>{p.value=[...p.value.slice(0,r),...p.value.slice(r+1)]}}},x=a=>ye[a.id]+("anchor"in a?`#${a.anchor}`:""),ge="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=g,B=b(ge,[]),_e=()=>({enabled:I>0,resultHistories:B,addResultHistory:i=>{{const r={link:x(i),display:i.display};"header"in i&&(r.header=i.header),B.value=[r,...B.value.slice(0,I-1)]}},removeResultHistory:i=>{B.value=[...B.value.slice(0,i),...B.value.slice(i+1)]}}),fe=a=>{const i=Ae(),r=$(),_=ce(),u=k(0),d=D(()=>u.value>0),A=me([]);return he(()=>{const{search:f,terminate:m}=ve(),C=Be(h=>{const{resultsFilter:H=l=>l,querySplitter:v,suggestionsFilter:O,...E}=i.value;h?(u.value+=1,f(h,r.value,E).then(l=>H(l,h,r.value,_.value)).then(l=>{u.value-=1,A.value=l}).catch(l=>{console.warn(l),u.value-=1,u.value||(A.value=[])})):A.value=[]},g.searchDelay-g.suggestDelay,{maxWait:5e3});pe([a,r],([h])=>C(h.join(" "))),de(()=>{m()})}),{isSearching:d,results:A}};var Se=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:i}){const r=X(),_=$(),u=Z(ee),{addQueryHistory:d,queryHistories:A,removeQueryHistory:f}=De(),{resultHistories:m,addResultHistory:C,removeResultHistory:h}=_e(),H=se(a,"queries"),{results:v,isSearching:O}=fe(H),E=te({isQuery:!0,index:0}),l=k(0),c=k(0),q=D(()=>A.value.length>0||m.value.length>0),S=D(()=>v.value.length>0),L=D(()=>v.value[l.value]||null),j=()=>{const{isQuery:e,index:s}=E;s===0?(E.isQuery=!e,E.index=e?m.value.length-1:A.value.length-1):E.index=s-1},T=()=>{const{isQuery:e,index:s}=E;s===(e?A.value.length-1:m.value.length-1)?(E.isQuery=!e,E.index=0):E.index=s+1},V=()=>{l.value=l.value>0?l.value-1:v.value.length-1,c.value=L.value.contents.length-1},U=()=>{l.value=l.value<v.value.length-1?l.value+1:0,c.value=0},P=()=>{c.value<L.value.contents.length-1?c.value+=1:U()},Y=()=>{c.value>0?c.value-=1:V()},R=e=>e.map(s=>Ce(s)?s:t(s[0],s[1])),z=e=>{if(e.type==="customField"){const s=oe[e.index]||"$content",[o,F=""]=ne(s)?s[_.value].split("$content"):s.split("$content");return e.display.map(n=>t("div",R([o,...n,F])))}return e.display.map(s=>t("div",R(s)))},y=()=>{l.value=0,c.value=0,i("updateQuery",""),i("close")},G=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},u.value.queryHistory),A.value.map((e,s)=>t("div",{class:["slimsearch-result-item",{active:E.isQuery&&E.index===s}],onClick:()=>{i("updateQuery",e)}},[t(Q,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:M,onClick:o=>{o.preventDefault(),o.stopPropagation(),f(s)}})]))])),K=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},u.value.resultHistory),m.value.map((e,s)=>t(J,{to:e.link,class:["slimsearch-result-item",{active:!E.isQuery&&E.index===s}],onClick:()=>{y()}},()=>[t(Q,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(o=>R(o)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:M,onClick:o=>{o.preventDefault(),o.stopPropagation(),h(s)}})]))]));return le("keydown",e=>{if(a.isFocusing){if(S.value){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")P();else if(e.key==="Enter"){const s=L.value.contents[c.value];d(a.queries.join(" ")),C(s),r.push(x(s)),y()}}else if(e.key==="ArrowUp")j();else if(e.key==="ArrowDown")T();else if(e.key==="Enter"){const{index:s}=E;E.isQuery?(i("updateQuery",A.value[s]),e.preventDefault()):(r.push(m.value[s].link),y())}}}),ae([l,c],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:a.queries.length?!S.value:!q.value}],id:"slimsearch-results"},a.queries.length?O.value?t(Ee,{hint:u.value.searching}):S.value?t("ul",{class:"slimsearch-result-list"},v.value.map(({title:e,contents:s},o)=>{const F=l.value===o;return t("li",{class:["slimsearch-result-list-item",{active:F}]},[t("div",{class:"slimsearch-result-title"},e||u.value.defaultTitle),s.map((n,W)=>{const w=F&&c.value===W;return t(J,{to:x(n),class:["slimsearch-result-item",{active:w,"aria-selected":w}],onClick:()=>{d(a.queries.join(" ")),C(n),y()}},()=>[n.type==="text"?null:t(n.type==="title"?ie:n.type==="heading"?re:ue,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[n.type==="text"&&n.header?t("div",{class:"content-header"},n.header):null,t("div",z(n))])])})])})):u.value.emptyResult:q.value?[G(),K()]:u.value.emptyHistory)}});export{Se as default};
