import{f as W,u as N,g as X,h as Z,j as ee,t as se,i as te,k as H,l as D,m as e,n as le,p as ae,s as re,R as Q,q as oe,v as Ee,x as ie,y as ue,z as ce,A as w,B as J,C as ne,D as Ae,E as me,F as he,L as pe,G as ve,H as de,I as Ce,J as M,K as Be,M as g}from"./app-CzMZbJz4.js";const ye=["/","/posts/","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/1.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/2.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/3.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/4.5.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/4.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/5.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/6.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/7.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/CRLF_and_LF.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/ConsoleRunner.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/random.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/time_and_space.html","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/xmake.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/0.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/1.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/2.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/3.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/4.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/5.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/6-ex.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/6.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/7.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/8-ex-linkedlist.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/8-ex-vector.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/8.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/challenges.html","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/pointer.html","/posts/CPL-Remake/0.html","/posts/CPL-Remake/1.html","/posts/CPL-Remake/2.html","/posts/CPL-Remake/3.html","/posts/Vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/css.html","/posts/Vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/html.html","/posts/Vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/intro.html","/posts/Vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ppt.html","/posts/Vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue3brief.html","/posts/Vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vuescript.html","/404.html","/posts/C__-SFML-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/","/posts/C-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/","/posts/CPL-DotOJ-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/","/posts/CPL-Remake/","/posts/Vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/","/category/","/category/c__-sfml/","/category/c-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E5%88%86%E4%BA%AB/","/category/cpl-dotoj-%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/","/category/cpl/","/category/vue3-%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/","/tag/","/tag/c__/","/tag/sfml/","/tag/cpl/","/tag/dotoj/","/tag/c-programming-language/","/tag/css/","/tag/html/","/tag/vue3/","/tag/javascript/","/tag/typescript/","/tag/reveal.js/","/article/","/star/","/timeline/"],Fe="SLIMSEARCH_QUERY_HISTORY",d=M(Fe,[]),De=()=>{const{queryHistoryCount:a}=g;return{enabled:a>0,queryHistories:d,addQueryHistory:i=>{d.value=Array.from(new Set([i,...d.value.slice(0,a-1)]))},removeQueryHistory:i=>{d.value=[...d.value.slice(0,i),...d.value.slice(i+1)]}}},P=a=>ye[a.id]+("anchor"in a?`#${a.anchor}`:""),ge="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:q}=g,C=M(ge,[]),Le=()=>({enabled:q>0,resultHistories:C,addResultHistory:E=>{{const i={link:P(E),display:E.display};"header"in E&&(i.header=E.header),C.value=[i,...C.value.slice(0,q-1)]}},removeResultHistory:E=>{C.value=[...C.value.slice(0,E),...C.value.slice(E+1)]}}),_e=a=>{const{page:E,routeLocale:i}=ne(),L=Ae(),r=H(0),B=D(()=>r.value>0),n=me([]);return he(()=>{const{search:_,terminate:h}=pe(),y=de(p=>{const{resultsFilter:f=l=>l,querySplitter:v,suggestionsFilter:x,...o}=L.value;p?(r.value+=1,_(p,i.value,o).then(l=>f(l,p,i.value,E.value)).then(l=>{r.value-=1,n.value=l}).catch(l=>{console.warn(l),r.value-=1,r.value||(n.value=[])})):n.value=[]},g.searchDelay-g.suggestDelay,{maxWait:5e3});ve([a,i],([p])=>y(p.join(" "))),Ce(()=>{h()})}),{isSearching:B,results:n}};var ke=W({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:E}){const i=N(),L=X(),r=Z(ee),{addQueryHistory:B,queryHistories:n,removeQueryHistory:_}=De(),{resultHistories:h,addResultHistory:y,removeResultHistory:p}=Le(),f=se(a,"queries"),{results:v,isSearching:x}=_e(f),o=te({isQuery:!0,index:0}),l=H(0),A=H(0),O=D(()=>n.value.length>0||h.value.length>0),k=D(()=>v.value.length>0),R=D(()=>v.value[l.value]||null),$=()=>{const{isQuery:s,index:t}=o;t===0?(o.isQuery=!s,o.index=s?h.value.length-1:n.value.length-1):o.index=t-1},j=()=>{const{isQuery:s,index:t}=o;t===(s?n.value.length-1:h.value.length-1)?(o.isQuery=!s,o.index=0):o.index=t+1},V=()=>{l.value=l.value>0?l.value-1:v.value.length-1,A.value=R.value.contents.length-1},I=()=>{l.value=l.value<v.value.length-1?l.value+1:0,A.value=0},T=()=>{A.value<R.value.contents.length-1?A.value+=1:I()},U=()=>{A.value>0?A.value-=1:V()},S=s=>s.map(t=>Be(t)?t:e(t[0],t[1])),Y=s=>{if(s.type==="customField"){const t=ue[s.index]||"$content",[m,u=""]=ce(t)?t[L.value].split("$content"):t.split("$content");return s.display.map(c=>e("div",S([m,...c,u])))}return s.display.map(t=>e("div",S(t)))},F=()=>{l.value=0,A.value=0,E("updateQuery",""),E("close")},z=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},n.value.map((s,t)=>{const m=o.isQuery&&o.index===t;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m,onClick:()=>{E("updateQuery",s)}},e("div",[e(w,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},s),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:J,onClick:u=>{u.preventDefault(),u.stopPropagation(),_(t)}})]))}))])),G=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},h.value.map((s,t)=>{const m=!o.isQuery&&o.index===t;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m},e(Q,{to:s.link,onClick:()=>{F()}},()=>[e(w,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[s.header?e("div",{class:"slimsearch-record-content-header"},s.header):null,e("div",s.display.map(u=>S(u)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:J,onClick:u=>{u.preventDefault(),u.stopPropagation(),p(t)}})]))}))]));return le("keydown",s=>{if(a.isFocusing){if(k.value){if(s.key==="ArrowUp")U();else if(s.key==="ArrowDown")T();else if(s.key==="Enter"){const t=R.value.contents[A.value];B(a.queries.join(" ")),y(t),i.push(P(t)),F()}}else if(s.key==="ArrowUp")$();else if(s.key==="ArrowDown")j();else if(s.key==="Enter"){const{index:t}=o;o.isQuery?(s.preventDefault(),E("updateQuery",n.value[t])):(i.push(h.value[t].link),F())}}}),ae([l,A],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!k.value:!O.value}]},a.queries.length?x.value?e(re,{hint:r.value.searching}):k.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},v.value.map(({title:s,contents:t},m)=>{const u=l.value===m;return e("div",{class:["slimsearch-record",{active:u}],role:"group","aria-selected":u},[e("div",{class:"slimsearch-record-title"},s||r.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},t.map((c,K)=>{const b=u&&A.value===K;return e("li",{class:["slimsearch-record-matches",{active:b}],role:"option","aria-selected":b},e(Q,{to:P(c),onClick:()=>{B(a.queries.join(" ")),y(c),F()}},()=>[c.type==="text"?null:e(c.type==="title"?oe:c.type==="heading"?Ee:ie,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[c.type==="text"&&c.header?e("div",{class:"slimsearch-record-content-header"},c.header):null,e("div",Y(c))])]))}))])})):r.value.emptyResult:O.value?[z(),G()]:r.value.emptyHistory)}});export{ke as default};
